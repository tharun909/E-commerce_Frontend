<!DOCTYPE html>
<html lang="en">
  <head>
    <title>I-MART â€“ Profile</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./nav.css" />
    <link rel="stylesheet" href="./profile.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" />
  </head>

  <body onload="loadWishlist()">
    <!-- Navigation Header -->
    <header>
      <div id="nav">
        <!-- Brand Logo -->
        <div id="brand">
          <h1>I<span>-</span>MART</h1>
        </div>

        <!-- Menu Links -->
        <div id="menus">
          <a href="index.html">Home</a>
          <a href="profile.html" class="active">Profile</a>
          <a href="products.html">Products</a>
          <a href="contactus.html">Contact</a>
        </div>

        <!-- Action Icons -->
        <div id="icons">
          <a href="cart.html" title="Cart">
            <i class="bi bi-bag"></i>
            <span id="cart-badge" style="display: none;">0</span>
          </a>
          <a href="#" title="Sign out">
            <i class="bi bi-power"></i>
          </a>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main>
      <div class="profile-container">
        <!-- Page Header -->
        <div class="profile-header">
          <div class="header-content">
            <h1>My Account</h1>
            <p>Manage your profile and preferences</p>
          </div>
        </div>

        <!-- Profile Dashboard -->
        <div class="profile-dashboard">
          <!-- User Info Card -->
          <div class="dashboard-card user-card">
            <div class="card-header">
              <h2>
                <i class="bi bi-person-circle"></i>
                User Information
              </h2>
            </div>
            <div class="card-body">
              <div class="info-row">
                <span class="info-label">Full Name</span>
                <span class="info-value">Virat Kohli</span>
              </div>
              <div class="info-row">
                <span class="info-label">Email</span>
                <span class="info-value">virat@aimart.com</span>
              </div>
              <div class="info-row">
                <span class="info-label">Phone</span>
                <span class="info-value">+91 98765 43210</span>
              </div>
              <div class="info-row">
                <span class="info-label">Member Since</span>
                <span class="info-value">January 2021</span>
              </div>
              <div class="info-row">
                <span class="info-label">Location</span>
                <span class="info-value">New Delhi, India</span>
              </div>
              <button class="edit-btn">
                <i class="bi bi-pencil"></i>
                Edit Profile
              </button>
            </div>
          </div>

          <!-- Stats Grid -->
          <div class="stats-grid">
            <!-- Orders Card -->
            <div class="dashboard-card stat-card">
              <div class="stat-icon orders-icon">
                <i class="bi bi-bag-check"></i>
              </div>
              <div class="stat-content">
                <h3>142</h3>
                <p>Total Orders</p>
              </div>
              <a href="#" class="view-link">
                View All <i class="bi bi-arrow-right"></i>
              </a>
            </div>

            <!-- Wishlist Card -->
            <div class="dashboard-card stat-card">
              <div class="stat-icon wishlist-icon">
                <i class="bi bi-heart"></i>
              </div>
              <div class="stat-content">
                <h3 id="wishlist-count">0</h3>
                <p>Wishlist Items</p>
              </div>
              <a href="#wishlist-section" class="view-link">
                View All <i class="bi bi-arrow-right"></i>
              </a>
            </div>

            <!-- Reviews Card -->
            <div class="dashboard-card stat-card">
              <div class="stat-icon reviews-icon">
                <i class="bi bi-star"></i>
              </div>
              <div class="stat-content">
                <h3>4.9</h3>
                <p>Average Rating</p>
              </div>
              <a href="#" class="view-link">
                My Reviews <i class="bi bi-arrow-right"></i>
              </a>
            </div>

            <!-- Rewards Card -->
            <div class="dashboard-card stat-card">
              <div class="stat-icon rewards-icon">
                <i class="bi bi-gift"></i>
              </div>
              <div class="stat-content">
                <h3>2,450</h3>
                <p>Reward Points</p>
              </div>
              <a href="#" class="view-link">
                Redeem <i class="bi bi-arrow-right"></i>
              </a>
            </div>
          </div>

          <!-- Wishlist Section -->
          <div class="dashboard-card wishlist-section" id="wishlist-section">
            <div class="card-header">
              <h2>
                <i class="bi bi-heart-fill"></i>
                My Wishlist
              </h2>
              <button class="clear-wishlist-btn" onclick="clearWishlist()">
                <i class="bi bi-trash"></i>
                Clear All
              </button>
            </div>
            <div class="card-body">
              <div class="wishlist-grid" id="wishlist-grid">
                <!-- Wishlist items will be loaded here -->
              </div>
            </div>
          </div>

          <!-- Recent Orders -->
          <div class="dashboard-card recent-orders">
            <div class="card-header">
              <h2>
                <i class="bi bi-clock-history"></i>
                Recent Orders
              </h2>
              <a href="#" class="view-all-link">View All</a>
            </div>
            <div class="card-body">
              <div class="order-item">
                <div class="order-info">
                  <div class="order-id">#ORD-2458</div>
                  <div class="order-date">Feb 8, 2026</div>
                </div>
                <div class="order-status delivered">Delivered</div>
                <div class="order-amount">$249.99</div>
              </div>
              <div class="order-item">
                <div class="order-info">
                  <div class="order-id">#ORD-2457</div>
                  <div class="order-date">Feb 5, 2026</div>
                </div>
                <div class="order-status shipped">Shipped</div>
                <div class="order-amount">$89.50</div>
              </div>
              <div class="order-item">
                <div class="order-info">
                  <div class="order-id">#ORD-2456</div>
                  <div class="order-date">Feb 1, 2026</div>
                </div>
                <div class="order-status delivered">Delivered</div>
                <div class="order-amount">$145.00</div>
              </div>
            </div>
          </div>

          <!-- Account Settings -->
          <div class="dashboard-card settings-card">
            <div class="card-header">
              <h2>
                <i class="bi bi-gear"></i>
                Account Settings
              </h2>
            </div>
            <div class="card-body">
              <div class="setting-item">
                <div class="setting-info">
                  <i class="bi bi-envelope"></i>
                  <div>
                    <div class="setting-label">Email Notifications</div>
                    <div class="setting-desc">Receive order updates via email</div>
                  </div>
                </div>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="setting-item">
                <div class="setting-info">
                  <i class="bi bi-bell"></i>
                  <div>
                    <div class="setting-label">Push Notifications</div>
                    <div class="setting-desc">Get alerts about deals and offers</div>
                  </div>
                </div>
                <label class="toggle">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="setting-item">
                <div class="setting-info">
                  <i class="bi bi-shield-check"></i>
                  <div>
                    <div class="setting-label">Two-Factor Authentication</div>
                    <div class="setting-desc">Add extra security to your account</div>
                  </div>
                </div>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Scripts -->
    <script>
      // ===================================
      // WISHLIST MANAGEMENT
      // ===================================

      /**
       * Load and display wishlist items
       */
      function loadWishlist() {
        const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
        const wishlistGrid = document.getElementById("wishlist-grid");
        const wishlistCount = document.getElementById("wishlist-count");

        // Update count
        wishlistCount.textContent = wishlist.length;

        // Clear grid
        wishlistGrid.innerHTML = "";

        // Empty state
        if (wishlist.length === 0) {
          wishlistGrid.innerHTML = `
            <div class="empty-wishlist">
              <i class="bi bi-heart"></i>
              <h3>Your wishlist is empty</h3>
              <p>Add products you love to save them for later</p>
              <a href="Products.html" class="browse-btn">
                <i class="bi bi-grid-3x3-gap"></i>
                Browse Products
              </a>
            </div>`;
          return;
        }

        // Display wishlist items
        wishlist.forEach((item, index) => {
          const wishlistItem = document.createElement("div");
          wishlistItem.className = "wishlist-item";
          wishlistItem.innerHTML = `
            <div class="wishlist-item-img">
              <img src="${item.image}" alt="${item.name}" />
            </div>
            <div class="wishlist-item-info">
              <div class="wishlist-item-category">${item.category || "Product"}</div>
              <h4 class="wishlist-item-name">${item.name}</h4>
              <div class="wishlist-item-price">$${item.price}</div>
            </div>
            <div class="wishlist-item-actions">
              <button class="wishlist-add-to-cart" onclick="addToCartFromWishlist(${index})">
                <i class="bi bi-bag-plus"></i>
                Add to Cart
              </button>
              <button class="wishlist-remove" onclick="removeFromWishlist(${index})" title="Remove from wishlist">
                <i class="bi bi-x-lg"></i>
              </button>
            </div>
          `;
          wishlistGrid.appendChild(wishlistItem);
        });

        // Update cart badge
        updateCartBadge();
      }

      /**
       * Remove item from wishlist
       */
      function removeFromWishlist(index) {
        let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
        wishlist.splice(index, 1);
        localStorage.setItem("wishlist", JSON.stringify(wishlist));
        loadWishlist();
      }

      /**
       * Add item from wishlist to cart
       */
      function addToCartFromWishlist(index) {
        const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
        const item = wishlist[index];
        
        if (!item) return;

        let carts = JSON.parse(localStorage.getItem("carts")) || [];
        
        // Check if already in cart
        const existsInCart = carts.some(cart => cart.name === item.name);
        if (existsInCart) {
          alert("This item is already in your cart!");
          return;
        }

        // Add to cart with quantity
        carts.push({ ...item, quantity: 1 });
        localStorage.setItem("carts", JSON.stringify(carts));
        
        // Update cart badge
        updateCartBadge();
        
        alert("Added to cart successfully!");
      }

      /**
       * Clear entire wishlist
       */
      function clearWishlist() {
        if (confirm("Are you sure you want to clear your entire wishlist?")) {
          localStorage.setItem("wishlist", JSON.stringify([]));
          loadWishlist();
        }
      }

      /**
       * Update cart badge count
       */
      function updateCartBadge() {
        const carts = JSON.parse(localStorage.getItem("carts")) || [];
        const cartBadge = document.getElementById("cart-badge");
        
        if (cartBadge) {
          if (carts.length > 0) {
            cartBadge.textContent = carts.length;
            cartBadge.style.display = "flex";
          } else {
            cartBadge.style.display = "none";
          }
        }
      }

      // Initialize cart badge on page load
      document.addEventListener("DOMContentLoaded", function() {
        updateCartBadge();
      });
    </script>
  </body>
</html>
